@using Business_Model.Model;
@model Business_Model.Model.KeyFinding

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body wizard-content">
                <div class="row " style="margin: 0 0px 2px;">
                    <div class="col-md-5 align-self-center">
                        <h4 class="card-title" id="1"></h4>
                    </div>
                    <div class="col-md-7 align-self-center text-right">
                        <div class="d-flex justify-content-end align-items-center">
                            <i class="mdi mdi-arrow-left"></i>  @Html.ActionLink("Back to Overview", "Index", "ModuleCourse", new { ControllerName = "KeyFinding", ActionName = "Index", ModuleName = Module.MarketResearch, SectionName = ModuleSection.MarketResearch_KeyFindings }, new { @class = "" })
                        </div>
                    </div>
                </div>

                <form id="frm_KeyFinding" class="tab-wizard wizard-circle">
                    <input type="hidden" id="jsIdea" value='@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model))' />
                    <input type="hidden" id="KeyFindingID" name="KeyFindingID" value="@Model.KeyFindingID" />
                    <input type="hidden" id="ActionType" value="@ViewBag.ActionType" />
                    <input type="hidden" id="ClientID" name="ClientID" value="@Model.ClientID" />
                    <!-- Step 1 -->
                    <h6>
                        Big Picture Research
                    </h6>
                    <section>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="wint1"> What 3 bits of research have been carried out? </label>

                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="firstName1">Bit-1 :</label>
                                    <textarea class='form-control ideatextarea progress-required @( Model.BigPictureResearch.ResearchCarriedOutBit1 != null ? "progress-percent" : "")' id="ResearchCarriedOutBit1" name="ResearchCarriedOutBit1" oninput="auto_grow_idea_textarea(this)">@Model.BigPictureResearch.ResearchCarriedOutBit1</textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="lastName1">Bit-2 :</label>
                                    <textarea class='form-control ideatextarea progress-required @( Model.BigPictureResearch.ResearchCarriedOutBit2 != null ? "progress-percent" : "")' id="ResearchCarriedOutBit2" name="ResearchCarriedOutBit2" oninput="auto_grow_idea_textarea(this)">@Model.BigPictureResearch.ResearchCarriedOutBit2</textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="lastName1">Bit-3 :</label>
                                    <textarea class='form-control ideatextarea progress-required @( Model.BigPictureResearch.ResearchCarriedOutBit3 != null ? "progress-percent" : "")' id="ResearchCarriedOutBit3" name="ResearchCarriedOutBit3" oninput="auto_grow_idea_textarea(this)">@Model.BigPictureResearch.ResearchCarriedOutBit3</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="wint1"> Are there any trends in the industry? </label>
                                    <textarea class='form-control ideatextarea progress-required @( Model.BigPictureResearch.IndustryTrends != null ? "progress-percent" : "")' id="IndustryTrends" name="IndustryTrends" oninput="auto_grow_idea_textarea(this)">@Model.BigPictureResearch.IndustryTrends</textarea>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="wint1">What is the market you will initially try to capture? </label>
                                    <textarea class='form-control ideatextarea progress-required @( Model.BigPictureResearch.CaptureInitially != null ? "progress-percent" : "")' id="CaptureInitially" name="CaptureInitially" oninput="auto_grow_idea_textarea(this)">@Model.BigPictureResearch.CaptureInitially</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="wint1">What is the size/value of the market?</label>
                                    <input type="text" class="form-control  progress-required jsCurrency" id="MarketSize" name="MarketSize" value="@Model.BigPictureResearch.MarketSize" />
                                    


                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="wint1"> What market share will you try to capture?</label>
                                    <input id="CaptureShare" type="text" name="CaptureShare" class="form-control  progress-required text-right" data-bts-button-down-class="btn btn-secondary btn-outline" data-bts-button-up-class="btn btn-secondary btn-outline" value="@(Convert.ToInt32(Model.BigPictureResearch.CaptureShare))">
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="wint1">   Your Market Share? </label>
                                    <input id="MarketShare" type="text" name="MarketShare" class="form-control  progress-required jsPercentage" data-bts-button-down-class="btn btn-secondary btn-outline" data-bts-button-up-class="btn btn-secondary btn-outline" value="@Model.BigPictureResearch.MarketShare">
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="wint1"> Roughly how long before you reach your market share? </label>
                                    <input id="MarketShareCaptureDuration" type="text" name="MarketShareCaptureDuration" class="form-control  progress-required jsYear" value="@Model.BigPictureResearch.MarketShareCaptureDuration">
                                </div>
                            </div>
                            <div class="col-md-7 jsKeyPlayerContainer">
                               
                                    <label for="wint1">Who are the Key players in the market?<br /> <br /></label>
                                    @if (ViewBag.MarketKeyPlayer.Count > 0)
                                    {
                                        int i = 0;
                                        foreach (var item in ViewBag.MarketKeyPlayer)
                                        {
                                            if (i == 0)
                                            {
                                                i = i + 1;
                                                <div class="row jsKeyMarketPlayer">

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control jsCompanyName progress-required" placeholder="Company" value="@item.Company">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control jsWebsite progress-required" placeholder="Website" value="@item.Website">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <div class="input-group mb-3">

                                                            <div class="input-group-append">
                                                                <button class="btn btn-secondary btn-outline bootstrap-touchspin-up jsAddKeyPlayer" type="button">+</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                            }
                                            else
                                            {
                                                <div class="row jsKeyMarketPlayer">

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control jsCompanyName progress-required" placeholder="Company" value="@item.Company">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control jsWebsite progress-required" placeholder="Website" value="@item.Website">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <div class="input-group mb-3">

                                                            <div class="input-group-append">
                                                                <button class="btn btn-secondary btn-outline bootstrap-touchspin-up jsRemoveKeyPlayer" type="button">-</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            }
                                        }
                                    }
                                    else
                                    {
                                        <div class="row jsKeyMarketPlayer">

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control jsCompanyName progress-required" placeholder="Company">
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <input type="text" class="form-control jsWebsite progress-required" placeholder="Website">
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                                <div class="input-group mb-3">

                                                    <div class="input-group-append">
                                                        <button class="btn btn-secondary btn-outline bootstrap-touchspin-up jsAddKeyPlayer" type="button">+</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    }



                                </div>
                           
                            </div>
                    </section>
                    <!-- Step 2 -->
                    <h6>
                        Focused Research
                    </h6>
                    <section>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @{ var arrayIdeaProgressed = String.IsNullOrEmpty(@Model.FocussedResearch.IdeaProgressed) == false ? @Model.FocussedResearch.IdeaProgressed.Split(',').ToArray() : new string[0]; }
                                    <label> At what stage is your idea?</label>
                                    <input type="hidden" id="IdeaProgressed" name="IdeaProgressed" class='progress-required @( arrayIdeaProgressed.Length > 0 ? "progress-percent" : "")' value="" />
                                    @foreach (var item in ViewBag.IdeaProgressed)
                                    {
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="@item.ID" name="_IdeaProgressed" value="@item.ID" @(Array.Exists(arrayIdeaProgressed, x => x == Convert.ToString(item.ID)) == true ? "checked=Checked" : "")>
                                            <label class="custom-control-label" for="@item.ID">@item.Value</label>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    @{ var arrayFeedbackReceived = String.IsNullOrEmpty(@Model.FocussedResearch.FeedbackReceived) == false ? @Model.FocussedResearch.FeedbackReceived.Split(',').ToArray() : new string[0]; }
                                    <label> How did you receive the feedback?</label>
                                    <input type="hidden" id="FeedbackReceived" name="FeedbackReceived" class='progress-required @( arrayFeedbackReceived.Length > 0 ? "progress-percent" : "")' value="" />
                                    @foreach (var item in ViewBag.FeedbackReceived)
                                    {
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="@item.ID" name="_FeedbackReceived" value="@item.ID" @(Array.Exists(arrayFeedbackReceived, x => x == Convert.ToString(item.ID)) == true ? "checked=Checked" : "")>
                                            <label class="custom-control-label" for="@item.ID">@item.Value</label>
                                        </div>
                                    }
                                </div>
                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="wint1">
                                        Have you talked to potential customers for feedback?
                                    </label>
                                    @*@{ var CustomerFeedback = Model.FocussedResearch.CustomerFeedback !=  ? "progress-percent" : ""; }*@
                                    @Html.DropDownListFor(n => n.FocussedResearch.CustomerFeedback, new SelectList(ViewBag.CustomerFeedback, "ID", "Value", @Model.FocussedResearch.CustomerFeedback), "- Please select -", new { @class = "custom-select col-12  progress-required" })

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="wint1">Rate the over all feed back?</label>
                                    @{ var FeedbackRate = Model.FocussedResearch.FeedbackRate != null ? "progress-percent" : ""; }
                                    @Html.DropDownListFor(n => n.FocussedResearch.FeedbackRate, new SelectList(ViewBag.FeedbackRate, "ID", "Value", @Model.FocussedResearch.FeedbackRate), "- Please select -", new { @class = "custom-select col-12 " + @FeedbackRate + " progress-required" })

                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="wint1">Key findings from Feedback? </label>
                                    <input type="text" class="form-control  progress-required " id="FeedbackKeyfinding" name="FeedbackKeyfinding" value="@Model.FocussedResearch.FeedbackKeyfinding" />

                                </div>
                            </div>
                        </div>
                    </section>

                </form>
            </div>
        </div>
    </div>
</div>
