@using Business_Model.Helper;
@using Business_Model.Model;
@model  IEnumerable<Business_Model.Model.Grants>

@{ 

    List<GrantSurvivalBudget> GrantLog = ViewBag.GrantLog as List<GrantSurvivalBudget>; 
    
}

@section PageStyle
{
    <link href="~/assets/node_modules/wizard/steps.css" rel="stylesheet">
    <link href="~/assets/node_modules/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
    <link href="~/Simple-Plain-Bar-Chart-Plugin-With-jQuery-barCharts/jquery.barCharts.css" rel="stylesheet" />
    <link href="~/assets/node_modules/Magnific-Popup-master/dist/magnific-popup.css" rel="stylesheet">
    <link href="~/assetsss/css/style.css" rel="stylesheet" />
    <link href="~/assets/node_modules/draggable-resizable-modal/css/modalbox.css" rel="stylesheet" />
    <link href="~/assets/node_modules/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/node_modules/bootstrap-select/bootstrap-select.min.css" rel="stylesheet" />
    <link href="~/assets/node_modules/image-picker/image-picker.css" rel="stylesheet" />
    <style>
        .progress {
            // display: flex;
            // height: auto !important;
            width: 100%;
            // font-size: .65625rem;
            background-color: #303641;
            border-radius: .25rem;
            background: red;
            z-index: 0;
            //width: 500px;
            // height: 10px !important;
        }

        div.progress {
            height: 10px;
        }

        div.steps li a {
            // color: #fff !important;
        }


        .modal-dialog {
            position: relative;
            display: table;
            overflow: auto;
            width: auto;
            min-width: 300px;
        }

        .modal-body { /* Restrict Modal width to 90% */
            overflow-x: auto !important;
            max-width: 90vw !important;
        }

        .youtube-icon {
            position: absolute;
            top: 40%;
            left: 45%;
            font-size: 30px;
        }

        .youtube-icon {
            position: absolute;
            top: 40%;
            left: 45%;
            font-size: 30px;
        }

            .youtube-icon:hover {
                font-size: 40px;
                color: red;
            }

        .titlebar_title {
            color: #333;
        }
    </style>

}



<div class="row page-titles">
    <div class="col-md-5 align-self-center">
        <h4 class="text-themecolor"> Grants/ Tax Relief/ Incentives</h4>
    </div>
    <div class="col-md-7 align-self-center text-right">
        <div class="d-flex justify-content-end align-items-center">
            <ol class="breadcrumb">


                <li class="breadcrumb-item"><a href="javascript:void(0)"> Home</a></li>
                <li class="breadcrumb-item">Finance </li>
                <li class="breadcrumb-item active"> Grants/ Tax Relief/ Incentives </li>
            </ol>



        </div>
    </div>
</div>
<div class="row" id="validation">
    @if (Model != null)
    {
        foreach (var item in Model)
        {
            var Status = GrantLog.Where(x => x.GrantID == item.GrantID).Select(x => x.GrantStatus).FirstOrDefault();
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <form class="form-material m-t-40">

                            <div class="form-group">
                                <label>Name</label>
                                <input type="text" class="form-control form-control-line" value="@item.Name" readonly>
                            </div>

                            <div class="form-group">
                                <label>Provide By</label>
                                <input type="text" class="form-control form-control-line" value="@item.ProvidedBy" readonly>
                            </div>
                            <div class="form-group">
                                <label>Type</label>
                                <input type="text" class="form-control form-control-line" value="@item.Type" readonly>
                            </div>
                            <div class="form-group">
                                <label>Description</label><br />
                                <div class='form-control' readonly> @item.Description</div>

                            </div>
                            <div class="form-group">
                                <label>Website</label> &nbsp;&nbsp; &nbsp; &nbsp;  <a href="@item.Website" target="_blank" class="btn btn-primary">Go</a>

                            </div>

                            <div class="form-group">

                            </div>


                        </form>
                        @if (item.VideoUrl != null)
                        {
                            <div class="row">

                                <div class="col-md-12" id="ModuleVideo">
                                    <iframe width="100%" height="100%" src="@item.VideoUrl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>


                            </div>

                        }

                        @if ((int)GrantStatus.Continue == (int)Status)
                        {
                            <div class="row text-center">
                                <div class="col-md-12" style="text-align:center;margin-top:5px">
                                    <a href="~/Finance/PersonalSurvivalBudge/@item.GrantID-1" target="_blank" class="btn btn-info">Continue</a>
                                </div>
                            </div>
                        }
                        else if ((int)GrantStatus.Locked == (int)Status)
                        {
                            <div class="row text-center">
                                <div class="col-md-12" style="text-align:center;margin-top:5px">
                                    <a href="~/Finance/BudgetApplied/@item.GrantID" target="_blank" class="btn btn-info">Applied</a>
                                </div>
                            </div>
                        }
                        else
                        {
                        <div class="row text-center">
                                <div class="col-md-12" style="text-align:center;margin-top:5px">
                                    <a href="~/Finance/PersonalSurvivalBudge/@item.GrantID-0" target="_blank" class="btn btn-info">Apply</a>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    }
</div>



<div id="grants" class="modal bs-example-modal-lg"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style=" padding-right: 17px;" aria-modal="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Extra Large modal</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>





@section PageScript
{
    <!-- This Page JS -->
    <script src="~/assets/node_modules/wizard/jquery.steps.min.js"></script>
    <script src="~/assets/node_modules/wizard/jquery.validate.min.js"></script>
    <script src="~/assets/node_modules/sticky-kit-master/dist/sticky-kit.min.js"></script>
    <script src="~/assets/node_modules/sparkline/jquery.sparkline.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="~/assets/node_modules/Magnific-Popup-master/dist/jquery.magnific-popup.min.js"></script>
    <script src="~/assets/node_modules/Magnific-Popup-master/dist/jquery.magnific-popup-init.js"></script>
    <script src="~/assets/node_modules/draggable-resizable-modal/js/modalbox.js"></script>
    <script src="~/assets/node_modules/switchery/dist/switchery.min.js"></script>
    <script src="~/assets/node_modules/bootstrap-select/bootstrap-select.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
         
            $("li a, li").removeClass("active");
            $("li ul").removeClass("in");
            $("#ulFinance").addClass("in");
            $("#liGrant").addClass("active");
            $('#ModuleVideo').css("height", $("#ModuleVideo").width() / 2);
        });
    </script>



    <script>
        // This is for the sticky sidebar
        $(".stickyside").stick_in_parent({
            offset_top: 100
        });

        $('.stickyside a').click(function () {
            $('html, body').animate({
                scrollTop: $($(this).attr('href')).offset().top - 100
            }, 500);
            return false;
        });
        // This is auto select left sidebar
        // Cache selectors
        // Cache selectors
        var lastId,
            topMenu = $(".stickyside"),
            topMenuHeight = topMenu.outerHeight(),
            // All list items
            menuItems = topMenu.find("a"),
            // Anchors corresponding to menu items
            scrollItems = menuItems.map(function () {
                var item = $($(this).attr("href"));
                if (item.length) {
                    return item;
                }
            });

        // Bind click handler to menu items


        // Bind to scroll
        $(window).scroll(function () {
            // Get container scroll position
            var fromTop = $(this).scrollTop() + topMenuHeight - 250;

            // Get id of current scroll item
            var cur = scrollItems.map(function () {
                if ($(this).offset().top < fromTop)
                    return this;
            });

            // Get the id of the current element
            cur = cur[cur.length - 1];
            var id = cur && cur.length ? cur[0].id : "";


            if (lastId !== id) {
                lastId = id;
                // Set/remove active class
                menuItems
                    .removeClass("active")
                    .filter("[href='#" + id + "']").addClass("activee");
            }
        });
    </script>

}

